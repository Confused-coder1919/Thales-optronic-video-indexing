# Thales Video Indexing - Environment Configuration Template
# Copy this file to .env and fill in your values

# Mistral API Key (required for vision model)
# Get your key from: https://console.mistral.ai
MISTRAL_API_KEY=your_mistral_api_key_here

# (Optional) Database URL
# Default: SQLite at data/entity_indexing/index.db
# ENTITY_INDEXING_DATABASE_URL=sqlite:///./data/entity_indexing/index.db

# (Optional) Redis URL
# Default: redis://localhost:6379/0
# ENTITY_INDEXING_REDIS_URL=redis://localhost:6379/0

# (Optional) Data directory
# Default: ./data/entity_indexing
# ENTITY_INDEXING_DATA_DIR=/path/to/data

# (Optional) YOLO weights path
# Default: yolov8n.pt (nano model, auto-downloaded)
# ENTITY_INDEXING_YOLO_WEIGHTS=yolov8m.pt

# (Optional) Embedding model
# Default: sentence-transformers/all-MiniLM-L6-v2
# ENTITY_INDEXING_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2

# (Optional) Whisper model for transcription
# Default: base
# ENTITY_INDEXING_WHISPER_MODEL=base

# (Optional) Default frame interval (seconds)
# Default: 5
# ENTITY_INDEXING_DEFAULT_INTERVAL=5

# (Optional) Smart sampling (scene/motion filtering)
# Default: enabled (true)
# ENTITY_INDEXING_SMART_SAMPLING_ENABLED=true
# ENTITY_INDEXING_SMART_SAMPLING_DIFF_THRESHOLD=0.06
# ENTITY_INDEXING_SMART_SAMPLING_MIN_KEEP=6

# (Optional) Detection confidence threshold
# Default: 0.25
# ENTITY_INDEXING_MIN_CONFIDENCE=0.25

# (Optional) Minimum consecutive detections required
# Default: 2
# ENTITY_INDEXING_MIN_CONSECUTIVE=2

# (Optional) Annotate frames with detections
# Default: true
# ENTITY_INDEXING_ANNOTATE_FRAMES=true

# (Optional) Open-vocabulary detection (CLIP)
# Default: disabled (false)
# ENTITY_INDEXING_OPEN_VOCAB_ENABLED=false
# ENTITY_INDEXING_OPEN_VOCAB_MODEL=openai/clip-vit-base-patch32
# ENTITY_INDEXING_OPEN_VOCAB_THRESHOLD=0.27
# ENTITY_INDEXING_OPEN_VOCAB_EVERY_N=1
# ENTITY_INDEXING_OPEN_VOCAB_MIN_CONSECUTIVE=1
# ENTITY_INDEXING_OPEN_VOCAB_LABELS=aircraft carrier,fighter jet,satellite,drone,helicopter,aircraft,missile,rocket,tank,armored vehicle,artillery,military vehicle

# (Optional) Discovery mode (caption â†’ entity extraction)
# Default: enabled (true)
# ENTITY_INDEXING_DISCOVERY_ENABLED=true
# ENTITY_INDEXING_DISCOVERY_MODEL=Salesforce/blip-image-captioning-base
# ENTITY_INDEXING_DISCOVERY_EVERY_N=1
# ENTITY_INDEXING_DISCOVERY_MIN_SCORE=0.2
# ENTITY_INDEXING_DISCOVERY_MIN_CONSECUTIVE=1
# ENTITY_INDEXING_DISCOVERY_MAX_PHRASES=8
# ENTITY_INDEXING_DISCOVERY_ONLY_MILITARY=true

# (Optional) Verification pass (CLIP)
# Default: enabled (true)
# ENTITY_INDEXING_VERIFY_ENABLED=true
# ENTITY_INDEXING_VERIFY_MODEL=openai/clip-vit-base-patch32
# ENTITY_INDEXING_VERIFY_THRESHOLD=0.27
# ENTITY_INDEXING_VERIFY_EVERY_N=3
# ENTITY_INDEXING_VERIFY_MAX_LABELS=12

# (Optional) OCR (text extraction)
# Default: enabled (true)
# ENTITY_INDEXING_OCR_ENABLED=true
# ENTITY_INDEXING_OCR_EVERY_N=4
# ENTITY_INDEXING_OCR_MIN_CONFIDENCE=60

# (Optional) Audio cleanup + speech detection
# Default: enabled (true)
# ENTITY_INDEXING_AUDIO_CLEANUP_ENABLED=true
# ENTITY_INDEXING_AUDIO_CLEANUP_FILTER=highpass=f=200,lowpass=f=3000,afftdn=nf=-25
# ENTITY_INDEXING_AUDIO_MUSIC_DETECTION_ENABLED=true
# ENTITY_INDEXING_AUDIO_SPEECH_THRESHOLD=0.1
# ENTITY_INDEXING_AUDIO_VAD_MODE=2

# (Optional) Confidence scoring
# Default: 0.1
# ENTITY_INDEXING_CONFIDENCE_MIN_SCORE=0.1


# (Optional) macOS Intel workaround for OpenMP
# KMP_DUPLICATE_LIB_OK=TRUE
# OMP_NUM_THREADS=1
# MKL_NUM_THREADS=1
